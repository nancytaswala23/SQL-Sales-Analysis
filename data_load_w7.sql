ALTER SESSION SET nls_date_format = 'YYYY-MM-DD';

DROP TABLE IF EXISTS sales;
DROP TABLE IF EXISTS menu;
DROP TABLE IF EXISTS members;

--GENERATED ALWAYS AS IDENTITY = oracle auto assigns. we cannot assign manually
--GENERATED BY DEFAULT AS IDENTITY = uses user provided value. If not provided then oracle generates a unique value
CREATE TABLE sales (
    sales_id      NUMBER
        GENERATED ALWAYS AS IDENTITY,
    customer_code VARCHAR(5),
    order_date    DATE,
    product_id    INTEGER
);

INSERT INTO sales (
    customer_code,
    order_date,
    product_id
) VALUES (
    'A1',
    '2024-03-01',
    '1'
);

INSERT INTO sales (
    customer_code,
    order_date,
    product_id
) VALUES (
    'A1',
    '2024-03-01',
    '2'
);

INSERT INTO sales (
    customer_code,
    order_date,
    product_id
) VALUES (
    'A1',
    '2024-03-07',
    '2'
);

INSERT INTO sales (
    customer_code,
    order_date,
    product_id
) VALUES (
    'A1',
    '2024-03-10',
    '3'
);

INSERT INTO sales (
    customer_code,
    order_date,
    product_id
) VALUES (
    'A1',
    '2024-03-11',
    '3'
);

INSERT INTO sales (
    customer_code,
    order_date,
    product_id
) VALUES (
    'A1',
    '2024-03-11',
    '3'
);

INSERT INTO sales (
    customer_code,
    order_date,
    product_id
) VALUES (
    'B2',
    '2024-03-01',
    '2'
);

INSERT INTO sales (
    customer_code,
    order_date,
    product_id
) VALUES (
    'B2',
    '2024-03-02',
    '2'
);

INSERT INTO sales (
    customer_code,
    order_date,
    product_id
) VALUES (
    'B2',
    '2024-03-04',
    '1'
);

INSERT INTO sales (
    customer_code,
    order_date,
    product_id
) VALUES (
    'B2',
    '2024-03-11',
    '1'
);

INSERT INTO sales (
    customer_code,
    order_date,
    product_id
) VALUES (
    'B2',
    '2024-03-16',
    '3'
);

INSERT INTO sales (
    customer_code,
    order_date,
    product_id
) VALUES (
    'B2',
    '2024-02-01',
    '3'
);

INSERT INTO sales (
    customer_code,
    order_date,
    product_id
) VALUES (
    'C3',
    '2024-03-01',
    '3'
);

INSERT INTO sales (
    customer_code,
    order_date,
    product_id
) VALUES (
    'C3',
    '2024-03-01',
    '3'
);

INSERT INTO sales (
    customer_code,
    order_date,
    product_id
) VALUES (
    'C3',
    '2024-03-07',
    '3'
);

CREATE TABLE menu (
    product_id   NUMBER PRIMARY KEY,
    product_name VARCHAR(5),
    price        NUMBER(5, 2)
);

INSERT INTO menu (
    product_id,
    product_name,
    price
) VALUES (
    1,
    'Pizza',
    '10.99'
);

INSERT INTO menu (
    product_id,
    product_name,
    price
) VALUES (
    2,
    'Mazza',
    '3.99'
);

INSERT INTO menu (
    product_id,
    product_name,
    price
) VALUES (
    3,
    'Ramen',
    '12.85'
);

INSERT INTO menu (
    product_id,
    product_name,
    price
) VALUES (
    4,
    'Coke',
    '1.99'
);

CREATE TABLE members (
    customer_id   NUMBER PRIMARY KEY,
    customer_code VARCHAR(5),
    date_of_join  DATE
);

INSERT INTO members (
    customer_id,
    customer_code,
    date_of_join
) VALUES (
    1,
    'A1',
    '2024-03-07'
);

INSERT INTO members (
    customer_id,
    customer_code,
    date_of_join
) VALUES (
    2,
    'B2',
    '2024-03-09'
);

SELECT *
FROM sales;